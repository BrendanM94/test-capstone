<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>My Sandbox To-Do List</title>
</head>
<body>
    <div>
        {% if user.is_authenticated %}
            <p>
                Logged in as {{ user.username }} |
                <form method="post" action="{% url 'logout' %}" style="display:inline;">
    {% csrf_token %}
    <button type="submit">Log out</button>
</form>

            </p>
        {% else %}
            <p>
                <a href="{% url 'login' %}">Log in</a>
            </p>
        {% endif %}
    </div>

    <h1>My To-Dos</h1>

    <!-- Add new todo form -->
    <form method="post">
        {% csrf_token %}
        <div>
            <label for="id_title">Title:</label>
            <input id="id_title" type="text" name="title" required placeholder="What do you need to do?">
        </div>
        <div>
            <label for="id_description">Description (optional):</label><br>
            <textarea id="id_description" name="description" rows="3" cols="40"
                      placeholder="Any details you want to remember?"></textarea>
        </div>
        <button type="submit">Add To-Do</button>
    </form>

    <hr>

    <!-- Show existing todos -->
    {% if todos %}
        <ul>
        {% for item in todos %}
           <li>
    {% if item.completed %}
    ✅ <strong>{{ item.title }}</strong>
    <a href="{% url 'todo_delete' item.id %}" style="color:red;">Delete</a>
    {% else %}
    ⬜ <strong>{{ item.title }}</strong>
    <a href="{% url 'todo_complete' item.id %}">Mark complete</a>
    <a href="{% url 'todo_delete' item.id %}" style="color:red;">Delete</a>
{% endif %}


    {% if item.description %}
        – {{ item.description }}
    {% endif %}
</li>
                {% if item.description %}
                    – {{ item.description }}
                {% endif %}
            </li>
        {% endfor %}
        </ul>
    {% else %}
        <p>No to-dos yet. Add one above!</p>
    {% endif %}
</body>
</html>
